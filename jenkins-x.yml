buildPack: ../../jenkins-x-classic/packs/javascript
pipelineConfig:
  pipelines:
    pullRequest:
      setup:
        steps:
          - sh: export ROADIE_TOKEN="$(jx step credential -s roadie -k token --optional false)"
            name: get-roadie-token
          - sh: echo $ROADIE_TOKEN
            name: debug-log
    release:
      setup:
        steps:
          - sh: export ROADIE_TOKEN="$(jx step credential -s roadie -k token --optional false)"
            name: get-roadie-token
      postBuild:
        steps:
          - sh: npm i -g semantic-release
            name: install-semantic-release
          - sh: semantic-release
            name: semantic-release